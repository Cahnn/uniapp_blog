(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-blogInfoCmpt"],{3820:function(t,o,n){t.exports=n.p+"static/img/comment.a9bafe00.png"},"388c":function(t,o,n){t.exports=n.p+"static/img/delete.db652b6f.png"},"3b95":function(t,o,n){"use strict";n.r(o);var e=n("7244"),i=n("5ecd");for(var c in i)"default"!==c&&function(t){n.d(o,t,(function(){return i[t]}))}(c);n("586d");var l,s=n("f0c5"),a=Object(s["a"])(i["default"],e["b"],e["c"],!1,null,"7c33a9dc",null,!1,e["a"],l);o["default"]=a.exports},"586d":function(t,o,n){"use strict";var e=n("f301"),i=n.n(e);i.a},"5ecd":function(t,o,n){"use strict";n.r(o);var e=n("648f"),i=n.n(e);for(var c in e)"default"!==c&&function(t){n.d(o,t,(function(){return e[t]}))}(c);o["default"]=i.a},"648f":function(t,o,n){"use strict";var e=n("4ea4");n("c740"),n("4160"),n("a434"),n("159b"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,n("96cf");var i=e(n("1da1")),c={data:function(){return{blogInfo:[],collection:!1,collectionImg:"/static/message/star.png",blogId:"",colStatus:"收藏"}},onLoad:function(t){void 0===t.blogInfo?console.log("数据为空值"):this.blogInfo=JSON.parse(t.blogInfo),console.log("this.blogInfo:",this.blogInfo),this.blogId=this.blogInfo.id,uni.setStorageSync("blogInfo",this.blogInfo),uni.getStorage({key:"blogId",success:function(t){console.log("缓存读取成功",t.data)}}),this.getCollectionActive()},onShow:function(){uni.getStorageSync("userid")&&this.getCollectionActive()},methods:{setBlogCollection:function(t,o){console.log("进入加入存储方法中"),uni.setStorage({key:"MyCollectionBlogsList",data:t,success:function(){o?uni.showToast({icon:"success",title:"收藏成功"}):uni.showToast({icon:"success",title:"取消收藏"})},fail:function(t){console.log(t)}})},collectionFollow:function(){var t=this;this.collection?uni.showModal({title:"提示",content:"确定取消收藏此文章吗？",success:function(o){o.confirm?(t.collection=!1,t.collectionImg="/static/message/star.png",t.colStatus="收藏",uni.getStorage({key:"MyCollectionBlogsList",success:function(o){var n=o.data,e=n.findIndex((function(o){if(o.id===t.blogInfo.id)return!0}));n.splice(e,1),t.setBlogCollection(n,!1)}})):console.log("用户不取消")}}):(this.collectionImg="/static/message/starfill.png",this.collection=!0,this.colStatus="已收藏",uni.getStorage({key:"MyCollectionBlogsList",success:function(o){console.log("加入成功"),console.log(o.data);var n=o.data,e=!1;n.forEach((function(o){o.id===t.blogInfo.id&&(e=!0)})),e||(console.log("将数据加入存储列表"),n.push(t.blogInfo),t.setBlogCollection(n,!0))},fail:function(o){console.log("加入存储失败");var n=[];n.push(t.blogInfo),t.setBlogCollection(n,!0)}}))},getCollectionActive:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:uni.getStorage({key:"MyCollectionBlogsList",success:function(o){var n=o.data,e=!1;console.log("收藏：",n),n.forEach((function(o){o.id===t.blogInfo.id&&(e=!0)})),e?(console.log("收藏"),t.collectionImg="/static/message/starfill.png",t.collection=!0,t.colStatus="已收藏"):(t.collectionImg="/static/message/star.png",t.collection=!1,t.colStatus="收藏")}});case 1:case"end":return o.stop()}}),o)})))()},editBlog:function(t){console.log(t.id);var o=t.id;uni.navigateTo({url:"/pages/home/add?artId="+o})},deleteBlog:function(t){var o=this,n=t.currentTarget.dataset.artid;console.log(n),uni.showModal({title:"提示",content:"确定要删除吗?",success:function(t){t.confirm?uni.request({url:o.server_url+"/blog/remove",method:"POST",data:{id:n},success:function(t){uni.showToast({title:"已删除",icon:"success"}),!0===o.collection&&uni.getStorage({key:"MyCollectionBlogsList",success:function(t){var n=t.data,e=n.findIndex((function(t){if(t.id===o.blogInfo.id)return!0}));n.splice(e,1),o.setBlogCollection(n,!1)}}),setTimeout((function(){uni.switchTab({url:"./home"})}),500)},fail:function(t){uni.showToast({title:"删除失败",icon:"none"})}}):t.cancel&&uni.showToast({title:"取消删除",icon:"success"})}})}}};o.default=c},7244:function(t,o,n){"use strict";var e;n.d(o,"b",(function(){return i})),n.d(o,"c",(function(){return c})),n.d(o,"a",(function(){return e}));var i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("v-uni-view",{staticClass:"blogInfo"},[e("v-uni-view",{staticClass:"operation"},[e("v-uni-view",{staticClass:"edit",attrs:{"data-artid":t.blogInfo.id},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.editBlog(t.blogInfo)}}},[e("v-uni-image",{attrs:{src:n("3820")}}),e("br"),e("v-uni-view",{staticClass:"word"},[t._v("编辑")])],1),e("v-uni-view",{staticClass:"good",attrs:{"data-artid":t.blogInfo.id},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.deleteBlog.apply(void 0,arguments)}}},[e("v-uni-image",{attrs:{src:n("388c")}}),e("br"),e("v-uni-view",{staticClass:"word"},[t._v("删除")])],1),e("v-uni-view",{staticClass:"collection",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.collectionFollow.apply(void 0,arguments)}}},[e("v-uni-image",{attrs:{src:t.collectionImg}}),e("br"),e("v-uni-view",{staticClass:"word"},[t._v(t._s(t.colStatus))])],1)],1),e("v-uni-view",{staticClass:"info"},[e("h2",{staticClass:"title"},[t._v(t._s(t.blogInfo.title))]),e("v-uni-view",{staticClass:"content"},[t._v(t._s(t.blogInfo.content))])],1)],1)},c=[]},e568:function(t,o,n){var e=n("24fb");o=e(!1),o.push([t.i,".blogInfo[data-v-7c33a9dc]{width:94%;margin:0 auto;text-align:center}.operation[data-v-7c33a9dc]{height:%?120?%;width:100%;text-align:center;padding-top:%?20?%;border-bottom:%?2?% solid #f9f9f9;position:fixed;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#fff;z-index:999}.operation uni-view[data-v-7c33a9dc]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center;font-size:%?25?%}.operation uni-view uni-image[data-v-7c33a9dc]{width:%?60?%;height:%?60?%}.info[data-v-7c33a9dc]{margin-top:%?40?%;padding-bottom:%?160?%}.content[data-v-7c33a9dc]{margin-top:%?20?%;line-height:%?60?%;font-size:%?40?%}",""]),t.exports=o},f301:function(t,o,n){var e=n("e568");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var i=n("4f06").default;i("18ace6bc",e,!0,{sourceMap:!1,shadowMode:!1})}}]);