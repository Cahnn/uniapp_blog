(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-blogInfoCmpt"],{3820:function(t,o,e){t.exports=e.p+"static/img/comment.a9bafe00.png"},"388c":function(t,o,e){t.exports=e.p+"static/img/delete.db652b6f.png"},"3b95":function(t,o,e){"use strict";e.r(o);var n=e("7634"),i=e("5ecd");for(var c in i)"default"!==c&&function(t){e.d(o,t,(function(){return i[t]}))}(c);e("5409");var l,s=e("f0c5"),a=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"420e3fee",null,!1,n["a"],l);o["default"]=a.exports},5409:function(t,o,e){"use strict";var n=e("dc0a"),i=e.n(n);i.a},"5ecd":function(t,o,e){"use strict";e.r(o);var n=e("648f"),i=e.n(n);for(var c in n)"default"!==c&&function(t){e.d(o,t,(function(){return n[t]}))}(c);o["default"]=i.a},"648f":function(t,o,e){"use strict";var n=e("4ea4");e("c740"),e("4160"),e("a434"),e("159b"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,e("96cf");var i=n(e("1da1")),c={data:function(){return{blogInfo:[],collection:!1,collectionImg:"/static/message/star.png",blogId:"",colStatus:"收藏"}},onLoad:function(t){void 0===t.blogInfo?console.log("数据为空值"):this.blogInfo=JSON.parse(t.blogInfo),console.log("this.blogInfo:",this.blogInfo),this.blogId=this.blogInfo.id,uni.setStorageSync("blogInfo",this.blogInfo),uni.getStorage({key:"blogId",success:function(t){console.log("缓存读取成功",t.data)}}),this.getCollectionActive()},onShow:function(){uni.getStorageSync("userid")&&this.getCollectionActive()},methods:{setBlogCollection:function(t,o){console.log("进入加入存储方法中"),uni.setStorage({key:"MyCollectionBlogsList",data:t,success:function(){o?uni.showToast({icon:"success",title:"收藏成功"}):uni.showToast({icon:"success",title:"取消收藏"})},fail:function(t){console.log(t)}})},collectionFollow:function(){var t=this;this.collection?uni.showModal({title:"提示",content:"确定取消收藏此文章吗？",success:function(o){o.confirm?(t.collection=!1,t.collectionImg="/static/message/star.png",t.colStatus="收藏",uni.getStorage({key:"MyCollectionBlogsList",success:function(o){var e=o.data,n=e.findIndex((function(o){if(o.id===t.blogInfo.id)return!0}));e.splice(n,1),t.setBlogCollection(e,!1)}})):console.log("用户不取消")}}):(this.collectionImg="/static/message/starfill.png",this.collection=!0,this.colStatus="已收藏",uni.getStorage({key:"MyCollectionBlogsList",success:function(o){console.log("加入成功"),console.log(o.data);var e=o.data,n=!1;e.forEach((function(o){o.id===t.blogInfo.id&&(n=!0)})),n||(console.log("将数据加入存储列表"),e.push(t.blogInfo),t.setBlogCollection(e,!0))},fail:function(o){console.log("加入存储失败");var e=[];e.push(t.blogInfo),t.setBlogCollection(e,!0)}}))},getCollectionActive:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:uni.getStorage({key:"MyCollectionBlogsList",success:function(o){var e=o.data,n=!1;console.log("收藏：",e),e.forEach((function(o){o.id===t.blogInfo.id&&(n=!0)})),n?(console.log("收藏"),t.collectionImg="/static/message/starfill.png",t.collection=!0,t.colStatus="已收藏"):(t.collectionImg="/static/message/star.png",t.collection=!1,t.colStatus="收藏")}});case 1:case"end":return o.stop()}}),o)})))()},editBlog:function(t){console.log(t.id);var o=t.id;uni.navigateTo({url:"/pages/home/add?artId="+o})},deleteBlog:function(t){var o=this,e=t.currentTarget.dataset.artid;console.log(e),uni.showModal({title:"提示",content:"确定要删除吗?",success:function(t){t.confirm?uni.request({url:o.server_url+"/blog/remove",method:"POST",data:{id:e},success:function(t){uni.showToast({title:"已删除",icon:"success"}),!0===o.collection&&uni.getStorage({key:"MyCollectionBlogsList",success:function(t){var e=t.data,n=e.findIndex((function(t){if(t.id===o.blogInfo.id)return!0}));e.splice(n,1),o.setBlogCollection(e,!1)}}),setTimeout((function(){uni.switchTab({url:"./home"})}),500)},fail:function(t){uni.showToast({title:"删除失败",icon:"none"})}}):t.cancel&&uni.showToast({title:"取消删除",icon:"success"})}})}}};o.default=c},7634:function(t,o,e){"use strict";var n;e.d(o,"b",(function(){return i})),e.d(o,"c",(function(){return c})),e.d(o,"a",(function(){return n}));var i=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("v-uni-view",{staticClass:"blogInfo"},[n("v-uni-view",{staticClass:"operation"},[n("v-uni-view",{staticClass:"edit",attrs:{"data-artid":t.blogInfo.id},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.editBlog(t.blogInfo)}}},[n("v-uni-image",{attrs:{src:e("3820")}}),n("br"),n("v-uni-view",{staticClass:"word"},[t._v("编辑")])],1),n("v-uni-view",{staticClass:"good",attrs:{"data-artid":t.blogInfo.id},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.deleteBlog.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:e("388c")}}),n("br"),n("v-uni-view",{staticClass:"word"},[t._v("删除")])],1),n("v-uni-view",{staticClass:"collection",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.collectionFollow.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:t.collectionImg}}),n("br"),n("v-uni-view",{staticClass:"word"},[t._v(t._s(t.colStatus))])],1)],1),n("v-uni-view",{staticClass:"info"},[n("h2",{staticClass:"title"},[t._v(t._s(t.blogInfo.title))]),n("v-uni-rich-text",{staticClass:"content",attrs:{nodes:t.blogInfo.content}})],1)],1)},c=[]},cf63:function(t,o,e){var n=e("24fb");o=n(!1),o.push([t.i,".blogInfo[data-v-420e3fee]{width:94%;margin:0 auto;text-align:center}.operation[data-v-420e3fee]{height:%?120?%;width:100%;text-align:center;padding-top:%?20?%;border-bottom:%?2?% solid #f9f9f9;position:fixed;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#fff;z-index:999}.operation uni-view[data-v-420e3fee]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center;font-size:%?25?%}.operation uni-view uni-image[data-v-420e3fee]{width:%?60?%;height:%?60?%}.info[data-v-420e3fee]{margin-top:%?40?%;padding-bottom:%?160?%}.title[data-v-420e3fee]{margin-bottom:%?30?%}.content[data-v-420e3fee]{padding-top:%?30?%;line-height:%?60?%;font-size:%?40?%;text-align:left}",""]),t.exports=o},dc0a:function(t,o,e){var n=e("cf63");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("4f06").default;i("e7fe27b6",n,!0,{sourceMap:!1,shadowMode:!1})}}]);